<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>My List</title>

  <link rel=stylesheet href=styles.css>
  <script src=lib.js></script>
  <script src=components.js></script>
  <script src=main.js></script>
  <script src=sortable.min.js></script>
</head>
<body>
  <header>
    <h1>mylist</h1>
  </header>

  <nav>
    <ul class="flex flex-wrap justify-between">
      <li>
        <a href="#" class="new-list">
          <span class="icon">+</span>
          New list
        </a>
      </li>
      <li><a href="#about">About</a></li>
    </ul>
  </nav>

  <section id="lists">
  </section>

  <section id="about">
    <details>
      <summary class="h3 my-4">Export</summary>

      <div class="flex flex-wrap justify-around">
        <aside class="card mb-4">
          <h4>todo.txt</h4>
          <p>
            Export in well-known
            <a href="https://github.com/todotxt/todo.txt">todo.txt format</a>
          </p>
          <footer class="actions text-right">
            <button type="button" id="export_todotxt">Download</button>
          </footer>
        </aside>

        <aside class="card mb-4">
          <h4>JSON</h4>
          <p>Export in JSON format</p>
          <footer class="actions flex justify-between">
            <label class="max-w-10r pointer">
              <input type="file" id="import_json">
              Import
            </label>

            <button type="button" id="export_json">Download</button>
          </footer>
        </aside>
      </div>
    </details>

    <details>
      <summary class="h3 my-4">FAQ</summary>
      <dl>
        <dt>Where is my data stored?</dt>
        <dd>By default it is stored only in the web browser's local storage.</dd>

        <dt>Can I share my lists?</dt>
        <dd>Not yet.</dd>

        <dt>I need to scroll too long to see my lists, can you do something about it?</dt>
        <dd>If you're done with the task, delete it.</dd>
      </dl>
    </details>

    <details>
      <summary class="h3 my-4">Back-End config</summary>
      <div class="field backend-url">
        <label for="backend_url" hidden>URL</label>
        <input
          type="url"
          class="config-field"
          name="backend_url"
          placeholder="https://example.com/personal/mylist"
        />
        <div class="hint">
          URL where a POST request is sent whenever a task changes.
          The payload is the whole page state, i.e., all the lists with their tasks.
        </div>
      </div>

      <div class="field username">
        <label for="backend_username" hidden>Username</label>
        <input
          type="text"
          class="config-field"
          name="backend_username"
          placeholder="Username"
        />
        <div class="hint">
          An email, a pseudonym or whatever &mdash; you control the back-end so
          validate as you please!
        </div>
      </div>

      <div class="field passphrase">
        <label for="backend_passphrase" hidden>Passphrase</label>
        <textarea
          rows="3"
          class="config-field"
          name="backend_passphrase"
          placeholder="Passphrase: One flew over the coocoo's nest"
        ></textarea>
        <div class="hint">
          A poem you like or the lyrics for your favorite song!
        </div>
      </div>
    </details>
  </section>

  <aside>
    <ul id=log_messages></ul>
  </aside>

  <aside id=debug_controls class=hidden>
    <button type=button id=print_state_btn>
      print state
    </button>
    <button type=button id=reset_log>
      reset log
    </button>
  </aside>

  <footer class="small text-center">
    <p class="mb-0">
      Written with curiosity by
      <a href="https://juankman94.github.io">juankman94</a>.
      <br>
      <span class="x-small mt-0">
        Check the link, there may be another privacy-focused web app there.
      </span>
    </p>

    <p class="italic mt-0">
      <a href="https://github.com/ipython/xkcd-font">
        xkcd font
      </a>,
      <a class="mx-2" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en">
        CC by,
      </a>
      ipython/xkcd-font team
    </p>
  </footer>

  <template id="tasklist-template">
    <h2 class="task-list--title">
      <slot name="list-name">
        <span class="list--name"></span>
      </slot>
      <span class="icon delete">x</span>
    </h2>

    <task-category-form></task-category-form>
  </template>

  <template id="category-template">
    <h3 class="task-category--title">
      <span class="icon grabber category-grabber">=</span>
      <color-picker class="ml-2" color="color-4"></color-picker>
      <slot name="category-name">
        <span class="category--name ml-2"></span>
      </slot>
      <span class="icon delete">x</span>
    </h3>

    <div class="tasks-container">
      <task-control></task-control>
    </div>
  </template>

  <template id="task-category-form-template">
    <h4 class="new-category--title">New category</h4>

    <form action="#" class="new-category--form">
      <label for="name">
        <span class="icon mr-2">+</span>
        <span class="sr-only">Name</span>

        <input
          name="name"
          class="text-field"
          type="text"
        />
      </label>
    </form>
  </template>

  <template id="taskitem-template">
    <span class="icon grabber task-grabber">=</span>
    <label>
      <input type=checkbox />
      <span class="task-item--name"></span>
    </label>
    <span class="icon delete">x</span>
  </template>

  <template id="newtask-template">
    <form action="#" class="new-task--form">
      <label for="task">
        <span class="icon mr-2">+</span>
        <span class="sr-only">Task</span>

        <input
          name="task"
          class="text-field"
          type="text"
        />
      </label>

      <input class="sr-only" type="submit" value="submit" />
    </form>
  </template>

  <template id="colorpicker-template">
    <div role="button" type="button" class="color-picker--current color-picker--option">
      <span class="sr-only">current color</span>
    </div>

    <div class="color-picker--options">
    </div>
  </template>
</body>
</html>
